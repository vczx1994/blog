(window.webpackJsonp=window.webpackJsonp||[]).push([[151],{655:function(t,s,a){"use strict";a.r(s);var e=a(42),n=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"换行符-lf-n-与-crlf-r-n"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#换行符-lf-n-与-crlf-r-n"}},[t._v("#")]),t._v(" 换行符 LF(\\n) 与 CRLF(\\r\\n)")]),t._v(" "),a("p",[t._v("最近遇到了很多 "),a("code",[t._v("\\n")]),t._v(" 与 "),a("code",[t._v("\\r\\n")]),t._v(" 的问题，虽然一直知道他们都是换行符，但也没有细究，今天顺手查了下。")]),t._v(" "),a("p",[t._v("首先，要了解 "),a("code",[t._v("\\n")]),t._v(" 与 "),a("code",[t._v("\\r\\n")]),t._v(" 的区别，在 "),a("a",{attrs:{href:"https://stackoverflow.com/questions/15433188/r-n-r-and-n-what-is-the-difference-between-them",target:"_blank",rel:"noopener noreferrer"}},[t._v("Difference between \\n and \\r?"),a("OutboundLink")],1),t._v(" 中有这样的示意：")]),t._v(" "),a("p",[a("strong",[t._v("\\r")]),t._v(" = CR (Carriage Return) → Used as a new line character in Mac OS before X\n"),a("strong",[t._v("\\n")]),t._v(" = LF (Line Feed) → Used as a new line character in Unix/Mac OS X\n"),a("strong",[t._v("\\r\\n")]),t._v(" = CR + LF → Used as a new line character in Windows")]),t._v(" "),a("p",[t._v("简单而言，现在除了 "),a("code",[t._v("Windows")]),t._v(" 把 "),a("code",[t._v("\\r\\n")]),t._v(" 作为换行符，其他系统都是把 "),a("code",[t._v("\\n")]),t._v(" 作为了换行符。那我们有没有一种方法可以 "),a("strong",[t._v("把文件中的不可打印字符显示出来，来确认文件中是以什么换行的")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"试验"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#试验"}},[t._v("#")]),t._v(" 试验")]),t._v(" "),a("p",[t._v("首先，先造一个包含两种换行符号的文件 "),a("code",[t._v("newline.txt")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" -e "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LF"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("CRLF"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("END'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" newline.txt\n$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" newline.txt\nLF\nCRLF\nEND\n")])])]),a("p",[t._v("使用 "),a("code",[t._v("cat")]),t._v("，它们都会按照换行符进行处理。而在浏览器中也会把它们当做换行符处理")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" o "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'LF\\nCRLF\\r\\nEND'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(' "'),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("LF")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("CRLF")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("END")]),t._v('"\n')])])]),a("h2",{attrs:{id:"如何判断文件中的换行符"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#如何判断文件中的换行符"}},[t._v("#")]),t._v(" 如何判断文件中的换行符")]),t._v(" "),a("h3",{attrs:{id:"vim"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vim"}},[t._v("#")]),t._v(" vim")]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("vim")]),t._v(" 中会发现其中蹊跷，"),a("code",[t._v(":set list")]),t._v("。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("vim")]),t._v(" newline.txt\nLF$\nCRLF^M$\nEND$\n")])])]),a("h3",{attrs:{id:"cat"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cat"}},[t._v("#")]),t._v(" cat")]),t._v(" "),a("p",[a("code",[t._v("cat -e")]),t._v(" 代表显示不可打印字符与换行符。")]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" -e newline.txt\nLF$\nCRLF^M$\nEND$\n")])])]),a("h3",{attrs:{id:"终极办法-strace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#终极办法-strace"}},[t._v("#")]),t._v(" 终极办法：strace")]),t._v(" "),a("p",[t._v("既然 "),a("code",[t._v("cat")]),t._v(" 会把文件内容打印到终端， "),a("strong",[t._v("那我们直接查看关于到标准输出 (FD 为1) 的系统调用 "),a("code",[t._v("write")]),t._v(" 就能从最根源上解决问题。")])]),t._v(" "),a("div",{staticClass:"language-shell extra-class"},[a("pre",{pre:!0,attrs:{class:"language-shell"}},[a("code",[t._v("$ "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("strace")]),t._v(" -e "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("write")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" newline.txt\nwrite"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(", "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"LF'),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("CRLF"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\r"}},[t._v("\\r")]),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v("END"),a("span",{pre:!0,attrs:{class:"token entity",title:"\\n"}},[t._v("\\n")]),t._v('"')]),t._v(", 13LF\nCRLF\nEND\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),t._v("\n+++ exited with "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v(" +++\n")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);