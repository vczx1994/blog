(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{733:function(t,a,s){"use strict";s.r(a);var e=s(42),r=Object(e.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"_2019"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019"}},[t._v("#")]),t._v(" 2019")]),t._v(" "),s("h2",{attrs:{id:"_2019-07-29"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-07-29"}},[t._v("#")]),t._v(" 2019/07/29")]),t._v(" "),s("h3",{attrs:{id:"_01-简单了解-netlify-的一些配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-简单了解-netlify-的一些配置"}},[t._v("#")]),t._v(" 01 简单了解 netlify 的一些配置")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.netlify.com/docs/netlify-toml-reference/",target:"_blank",rel:"noopener noreferrer"}},[t._v("netlify-toml-reference"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("由于所有的静态资源都打了 hash，为所有静态资源添加了永久缓存。另外配置了自动部署")]),t._v(" "),s("div",{staticClass:"language-toml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-toml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/assets/*"')]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token table class-name"}},[t._v("headers.values")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key property"}},[t._v("cache-control")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"max-age=31536000"')]),t._v("\n")])])]),s("p",[s("a",{attrs:{href:"https://github.com/shfshanyue/blog/blob/master/netlify.toml",target:"_blank",rel:"noopener noreferrer"}},[t._v("配置文件"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_02-一篇关于-exit-code-与-node-中异常的文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-一篇关于-exit-code-与-node-中异常的文章"}},[t._v("#")]),t._v(" 02 一篇关于 exit code 与 node 中异常的文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://shanyue.tech/post/exit-code-node-and-docker.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://shanyue.tech/post/exit-code-node-and-docker.html"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2019-07-30"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-07-30"}},[t._v("#")]),t._v(" 2019/07/30")]),t._v(" "),s("h3",{attrs:{id:"_01-一篇关于调试-js-的示例总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-一篇关于调试-js-的示例总结"}},[t._v("#")]),t._v(" 01 一篇关于调试 js 的示例总结")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://shanyue.tech/post/js-debug-examples/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://shanyue.tech/post/js-debug-examples/"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_02-关于-kill-的一些信号-signal"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-关于-kill-的一些信号-signal"}},[t._v("#")]),t._v(" 02 关于 "),s("code",[t._v("kill")]),t._v(" 的一些信号 (signal)")]),t._v(" "),s("p",[t._v("当起了一个 "),s("code",[t._v("server")]),t._v(" 时，")]),t._v(" "),s("ul",[s("li",[t._v("<Ctrl+C> 使用 "),s("code",[t._v("SIGINT(2)")]),t._v(" 来杀死进程")]),t._v(" "),s("li",[s("code",[t._v("kill")]),t._v(" 默认使用 "),s("code",[t._v("SIGTERM(15)")]),t._v(" 杀死进程，进程可以对该信号进行捕捉")]),t._v(" "),s("li",[s("code",[t._v("kill -9")]),t._v(" 使用 "),s("code",[t._v("SIGKILL(9)")]),t._v(" 杀死进程，进程无法对信号进行捕捉 (强制杀死)")])]),t._v(" "),s("h3",{attrs:{id:"_03-对指定进程的-signal-进行监控"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-对指定进程的-signal-进行监控"}},[t._v("#")]),t._v(" 03 对指定进程的 signal 进行监控")]),t._v(" "),s("p",[s("code",[t._v("strace -e signal -p $pid")])]),t._v(" "),s("h2",{attrs:{id:"_2019-07-31"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-07-31"}},[t._v("#")]),t._v(" 2019/07/31")]),t._v(" "),s("h3",{attrs:{id:"_01-graphql-中-apollo-server-对-cache-的处理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-graphql-中-apollo-server-对-cache-的处理"}},[t._v("#")]),t._v(" 01 graphql 中 apollo-server 对 cache 的处理")]),t._v(" "),s("p",[t._v("今天对我的脚手架的服务端添加了对缓存的处理，具体改动如下")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/shfshanyue/apollo-server-starter/commit/e40f59640f472146a4e9f1c94832ca431a0dbb11",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/apollo-server-starter/commit/e40f59640f472146a4e9f1c94832ca431a0dbb11"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("具体看了下相关插件关于缓存的源码，发现与我想的缓存机制不大一样。graphql 可以说是以 "),s("code",[t._v("field")]),t._v(" 为主要关注点，本以为它会根据 "),s("code",[t._v("field")]),t._v(" 来进行缓存，就如同客户端的"),s("code",[t._v("apollo-client")]),t._v(" 与 "),s("code",[t._v("relay")]),t._v(" 一般。结果它还是以整个 "),s("code",[t._v("query")]),t._v(" 为单位进行缓存，不过，细想也是有原因的：")]),t._v(" "),s("ol",[s("li",[t._v("方便 http response，(GET)")]),t._v(" "),s("li",[t._v("返回 field 的数据无法组成 resolver 函数中 "),s("code",[t._v("Parent")]),t._v(" 的数据类型")])]),t._v(" "),s("p",[t._v("关于如何对一个 "),s("code",[t._v("query")]),t._v(" 计算它的缓存时间的源码如下")]),t._v(" "),s("div",{staticClass:"language-graphql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-graphql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Post")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token directive function"}},[t._v("@cacheControl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("maxAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("240")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("id")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Int"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("votes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Int "),s("span",{pre:!0,attrs:{class:"token directive function"}},[t._v("@cacheControl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("maxAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("300")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("type")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Query")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("latestPost")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Post "),s("span",{pre:!0,attrs:{class:"token directive function"}},[t._v("@cacheControl")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token attr-name"}},[t._v("maxAge")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/apollographql/apollo-server/blob/master/packages/apollo-cache-control/src/index.ts#L180",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/apollographql/apollo-server/blob/master/packages/apollo-cache-control/src/index.ts#L180"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_02-对个人-next-react-graphql-的项目添加了简单的-ts-支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-对个人-next-react-graphql-的项目添加了简单的-ts-支持"}},[t._v("#")]),t._v(" 02 对个人 Next + React + GraphQL 的项目添加了简单的 ts 支持")]),t._v(" "),s("p",[t._v("以下是具体改动，Next 现在对新增 ts 支持的体验真是棒，只需要按着提示走就可以了")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/shfshanyue/shici/commit/297889a5c797ea504f1028afb550f59d39bac3a6",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/shici/commit/297889a5c797ea504f1028afb550f59d39bac3a6"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-01"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-01"}},[t._v("#")]),t._v(" 2019/08/01")]),t._v(" "),s("blockquote",[s("p",[t._v("每日一诗：荷风送香气，竹露滴清响。")])]),t._v(" "),s("h3",{attrs:{id:"_01-react-hook-的学习"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-react-hook-的学习"}},[t._v("#")]),t._v(" 01 React Hook 的学习")]),t._v(" "),s("p",[t._v("hook 的出现真是振奋人心，可惜现在才看。最喜欢它的两点：复用逻辑和减少嵌套。")]),t._v(" "),s("p",[t._v("graphql 中再配合 "),s("a",{attrs:{href:"https://github.com/trojanowski/react-apollo-hooks",target:"_blank",rel:"noopener noreferrer"}},[t._v("react-apollon-hooks"),s("OutboundLink")],1),t._v(" 使用，体验极佳。")]),t._v(" "),s("p",[t._v("PS: 再结合 "),s("a",{attrs:{href:"https://github.com/dotansimha/graphql-code-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("graphql-code-generator"),s("OutboundLink")],1),t._v(" 前端自动生成类型/(及注释文档)，不知少了多少前后端的沟通。graphql 后端的接口一出来，前端立即可以")]),t._v(" "),s("ol",[s("li",[t._v("使用 graphql-code-generator 自动拉取 type.ts，解决前后端联调最大的问题，及 API 的前后端数据类型一致性，且不用手工维护")]),t._v(" "),s("li",[t._v("在 type.ts 中有注释，即文档，不懂的可以再问后端")]),t._v(" "),s("li",[t._v("自动补全以及类型校验接口字段")])]),t._v(" "),s("h3",{attrs:{id:"_02-总结了一份关于-graphql-code-generator-自我感觉良好的配置文件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-总结了一份关于-graphql-code-generator-自我感觉良好的配置文件"}},[t._v("#")]),t._v(" 02 总结了一份关于 "),s("a",{attrs:{href:"https://github.com/dotansimha/graphql-code-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("graphql-code-generator"),s("OutboundLink")],1),t._v(" 自我感觉良好的配置文件")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("overwrite")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("schema")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://localhost:5000/graphql"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("documents")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"query.gql"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("generates")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("query.ts")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("plugins")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typescript"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"typescript-operations"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("config")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("scalars")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("DateTime")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Date\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("JSON")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"{ [key: string]: any }"')]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("namingConvention")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("typeNames")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" change"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("case"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#pascalCase")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("transformUnderscore")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token boolean important"}},[t._v("true")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("enumValues")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" keep\n")])])]),s("h2",{attrs:{id:"_2019-08-02"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-02"}},[t._v("#")]),t._v(" 2019/08/02")]),t._v(" "),s("blockquote",[s("p",[t._v("因过竹院逢僧话，又得浮生半日闲。")])]),t._v(" "),s("h3",{attrs:{id:"_01-看源码-bluebird-map-中的-concurrency-的实现原理-doing"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-看源码-bluebird-map-中的-concurrency-的实现原理-doing"}},[t._v("#")]),t._v(" 01 看源码 Bluebird.map 中的 concurrency 的实现原理 (doing)")]),t._v(" "),s("p",[t._v("自然自己可以实现一个关于 Promise 的限流，但是能设计好 API 就是另一回事了")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'In '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Out'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 如何使用 get 请求这些数据，并且限流三个")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" list "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("4")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("6")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("8")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("9")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("let")]),t._v(" count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" \n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n")])])]),s("h2",{attrs:{id:"_2019-08-03"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-03"}},[t._v("#")]),t._v(" 2019/08/03")]),t._v(" "),s("blockquote",[s("p",[t._v("叶上初阳干宿雨，水面清圆，一一风荷举。")])]),t._v(" "),s("h3",{attrs:{id:"_01-看源码-featurist-promise-limit-中的-promise-限流的实现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-看源码-featurist-promise-limit-中的-promise-限流的实现"}},[t._v("#")]),t._v(" 01 看源码 "),s("a",{attrs:{href:"https://github.com/featurist/promise-limit",target:"_blank",rel:"noopener noreferrer"}},[t._v("featurist/promise-limit"),s("OutboundLink")],1),t._v(" 中的 promise 限流的实现")]),t._v(" "),s("h3",{attrs:{id:"_02-接昨日-实现一个-promise-map"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-接昨日-实现一个-promise-map"}},[t._v("#")]),t._v(" 02 接昨日，实现一个 Promise.map")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("class")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("constructor")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("n")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("limit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enqueue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dequeue")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("limit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("length"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("shift")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("catch")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("reject"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("++")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("dequeue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" value\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("count "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("limit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("else")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("enqueue")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("PromiseMap")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" concurrency "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" limit "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Limit")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("concurrency"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" Promise"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("map")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" limit"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("build")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fn")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("...")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("i")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'In '")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("setTimeout")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("resolve")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" \n      console"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Out'")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" i "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1000")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("PromiseMap")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("i")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("i"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" concurrency"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2019-08-04"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-04"}},[t._v("#")]),t._v(" 2019/08/04")]),t._v(" "),s("blockquote",[s("p",[t._v("风吹古木晴天雨，月照平沙夏夜霜。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-05"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-05"}},[t._v("#")]),t._v(" 2019/08/05")]),t._v(" "),s("blockquote",[s("p",[t._v("黑云翻墨未遮山，白雨跳珠乱入船")])]),t._v(" "),s("h3",{attrs:{id:"_01-总结了两篇关于-promise-的文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-总结了两篇关于-promise-的文章"}},[t._v("#")]),t._v(" 01 总结了两篇关于 promise 的文章")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://shanyue.tech/code/Promise/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise简单实现"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://shanyue.tech/code/Promise-map/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Promise.map 限流实现"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-06"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-06"}},[t._v("#")]),t._v(" 2019/08/06")]),t._v(" "),s("blockquote",[s("p",[t._v("居高声自远，非是藉秋风")])]),t._v(" "),s("h3",{attrs:{id:"_01-解决-typescript-webpack-环境中-import-query-gql-的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-解决-typescript-webpack-环境中-import-query-gql-的问题"}},[t._v("#")]),t._v(" 01 解决 typescript/webpack 环境中 import query.gql 的问题")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/shfshanyue/shici/commit/fc59b3600c52fa106b224a2215734903fb58bd69",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/shici/commit/fc59b3600c52fa106b224a2215734903fb58bd69"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_02-看源码-graphql-tag"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-看源码-graphql-tag"}},[t._v("#")]),t._v(" 02 看源码 "),s("code",[t._v("graphql-tag")])]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://shanyue.tech/code/graphql-tag",target:"_blank",rel:"noopener noreferrer"}},[t._v("graphql-tag 源码分析"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_03-了解-node-中的-stream-以及原理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-了解-node-中的-stream-以及原理"}},[t._v("#")]),t._v(" 03 了解 node 中的 stream 以及原理")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-07"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-07"}},[t._v("#")]),t._v(" 2019/08/07")]),t._v(" "),s("blockquote",[s("p",[t._v("惊鹊栖未定，飞萤捲帘入。")])]),t._v(" "),s("h3",{attrs:{id:"_01-思考两个问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-思考两个问题"}},[t._v("#")]),t._v(" 01 思考两个问题")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://shanyue.tech/post/business-get-started",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何快速熟悉新业务"),s("OutboundLink")],1)]),t._v(" "),s("li",[t._v("如何对测试环境添加假数据")])]),t._v(" "),s("h3",{attrs:{id:"_02-关于-prerender-与-ssr-的取舍思考"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-关于-prerender-与-ssr-的取舍思考"}},[t._v("#")]),t._v(" 02 关于 prerender 与 ssr 的取舍思考")]),t._v(" "),s("h3",{attrs:{id:"_03-大致了解-musl"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-大致了解-musl"}},[t._v("#")]),t._v(" 03 大致了解 musl")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-08"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-08"}},[t._v("#")]),t._v(" 2019/08/08")]),t._v(" "),s("blockquote",[s("p",[t._v("睡起秋声无觅处，满阶梧叶月明中。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-09"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-09"}},[t._v("#")]),t._v(" 2019/08/09")]),t._v(" "),s("h3",{attrs:{id:"_01-看-graphql-js-的源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-看-graphql-js-的源码"}},[t._v("#")]),t._v(" 01 看 graphql.js 的源码")]),t._v(" "),s("h3",{attrs:{id:"_02-graphql-js-中有一段-promise-reduce-的实现-用来串行-promise。比较简单-贴下边"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-graphql-js-中有一段-promise-reduce-的实现-用来串行-promise。比较简单-贴下边"}},[t._v("#")]),t._v(" 02 graphql.js 中有一段 Promise.reduce 的实现，用来串行 Promise。比较简单，贴下边")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" promiseReduce"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("U")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  values"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" $ReadOnlyArray"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("U")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("T")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" PromiseOrValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("U")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  initialValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PromiseOrValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("U")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" PromiseOrValue"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),s("span",{pre:!0,attrs:{class:"token constant"}},[t._v("U")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" values"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("reduce")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("previous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("isPromise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("?")]),t._v(" previous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolved")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("resolved"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("callback")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("previous"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    initialValue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2019-08-10"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-10"}},[t._v("#")]),t._v(" 2019/08/10")]),t._v(" "),s("h3",{attrs:{id:"_01-看-dataloader-源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-看-dataloader-源码"}},[t._v("#")]),t._v(" 01 看 dataloader 源码")]),t._v(" "),s("p",[t._v("关于 Promise 各种功能实现的一个万能的队列...")]),t._v(" "),s("div",{staticClass:"language-javascript extra-class"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Promise")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" reject")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  queue"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    fn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    resolve"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    reject\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_02-看-cmake-用法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-看-cmake-用法"}},[t._v("#")]),t._v(" 02 看 CMAKE 用法")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-11"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-11"}},[t._v("#")]),t._v(" 2019/08/11")]),t._v(" "),s("blockquote",[s("p",[t._v("月华收，云淡霜天曙。")])]),t._v(" "),s("h3",{attrs:{id:"_01-体验-taro-使用它做一个小程序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-体验-taro-使用它做一个小程序"}},[t._v("#")]),t._v(" 01 体验 taro，使用它做一个小程序")]),t._v(" "),s("h3",{attrs:{id:"_02-使用-react-hook-写一个倒计时"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-使用-react-hook-写一个倒计时"}},[t._v("#")]),t._v(" 02 使用 react-hook 写一个倒计时")]),t._v(" "),s("p",[t._v("恩，这可以考察关于 react hook 的了解与熟悉程度。")]),t._v(" "),s("p",[t._v("刚开始熟悉 react-hook 时，写一个倒计时组件还是比较有点难度的")]),t._v(" "),s("p",[t._v("这一条加入我的候选人面试套餐")]),t._v(" "),s("h3",{attrs:{id:"_03-react-hook-中的-useeffect-的执行时机"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-react-hook-中的-useeffect-的执行时机"}},[t._v("#")]),t._v(" 03 react-hook 中的 useEffect 的执行时机")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-12"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-12"}},[t._v("#")]),t._v(" 2019/08/12")]),t._v(" "),s("h3",{attrs:{id:"_01-htop-ps-中的-time"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-htop-ps-中的-time"}},[t._v("#")]),t._v(" 01 htop/ps 中的 time")]),t._v(" "),s("p",[s("code",[t._v("time")]),t._v(" 指 cpu user time + cpu system time.\n"),s("code",[t._v("etime")]),t._v(" 指启动了多久时间")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-13"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-13"}},[t._v("#")]),t._v(" 2019/08/13")]),t._v(" "),s("blockquote",[s("p",[t._v("紫薇朱槿花残，残阳却照阑干")])]),t._v(" "),s("h3",{attrs:{id:"_01-了解数据仓库以及分层"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-了解数据仓库以及分层"}},[t._v("#")]),t._v(" 01 了解数据仓库以及分层")]),t._v(" "),s("ul",[s("li",[t._v("ODS: Operational Data Store")]),t._v(" "),s("li",[t._v("DW: data warehouse\n"),s("ul",[s("li",[t._v("DWD")]),t._v(" "),s("li",[t._v("DWB")]),t._v(" "),s("li",[t._v("DWS")])])]),t._v(" "),s("li",[t._v("DIM: 维度数据层")])]),t._v(" "),s("p",[t._v("就我理解，数据仓库分层，就如同业务代码上线前的若干环境")]),t._v(" "),s("h3",{attrs:{id:"_02-了解-postgres-的-query-plan"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-了解-postgres-的-query-plan"}},[t._v("#")]),t._v(" 02 了解 postgres 的 Query Plan")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.postgresql.org/docs/9.5/using-explain.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("using-explain"),s("OutboundLink")],1)])]),t._v(" "),s("p",[t._v("添加索引后，要确保是否有效，可以先 explain 一下")]),t._v(" "),s("h3",{attrs:{id:"_03-了解-postgres-的-search-path"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-了解-postgres-的-search-path"}},[t._v("#")]),t._v(" 03 了解 postgres 的 search path")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("show")]),t._v(" search_path\n")])])]),s("p",[t._v("恩，还有特殊的 schema："),s("code",[t._v("pg_catalog")]),t._v("，自带 search_path...")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-15"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-15"}},[t._v("#")]),t._v(" 2019/08/15")]),t._v(" "),s("blockquote",[s("p",[t._v("寒蝉凄切，对长亭晚，骤雨初歇。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-16"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-16"}},[t._v("#")]),t._v(" 2019/08/16")]),t._v(" "),s("blockquote",[s("p",[t._v("陇首云飞，江边日晚，烟波满目凭阑久。")])]),t._v(" "),s("h3",{attrs:{id:"_01-linux-jobs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-linux-jobs"}},[t._v("#")]),t._v(" 01 linux jobs")]),t._v(" "),s("p",[t._v("需要注意的是，"),s("code",[t._v("jobs")]),t._v(" 与 "),s("code",[t._v("tty")]),t._v(" 相关联。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run dev\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 放到后台并停止该程序 ")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Ctrl+Z"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 激活该程序")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("bg")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 放到前台")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("fg")]),t._v("\n")])])]),s("p",[t._v("不过一般情况下还是用 "),s("code",[t._v("tmux")]),t._v(" 使用多，特殊情况下，如在 "),s("code",[t._v("vscode")]),t._v(" 的终端会使用 "),s("code",[t._v("jobs")])]),t._v(" "),s("h3",{attrs:{id:"_02-一篇文章-如何为测试环境添加假数据"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-一篇文章-如何为测试环境添加假数据"}},[t._v("#")]),t._v(" 02 一篇文章 "),s("a",{attrs:{href:"https://shanyue.tech/post/dev-data-create.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("如何为测试环境添加假数据"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_03-stty-size"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-stty-size"}},[t._v("#")]),t._v(" 03 stty size")]),t._v(" "),s("p",[s("code",[t._v("stty size")]),t._v(" 输出当前 tty 的高和长。虽然我以前是通过 "),s("code",[t._v("seq 1 100")]),t._v(" 来看控制台的高...")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-17"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-17"}},[t._v("#")]),t._v(" 2019/08/17")]),t._v(" "),s("blockquote",[s("p",[t._v("登孤垒荒凉，危亭旷望，静临烟渚。")])]),t._v(" "),s("h3",{attrs:{id:"_01-postgres-把查询结果写到文件中"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-postgres-把查询结果写到文件中"}},[t._v("#")]),t._v(" 01 postgres 把查询结果写到文件中")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("\\o "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("tmp"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("query"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("txt\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" users "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("100")]),t._v("\n\\o\n")])])]),s("h3",{attrs:{id:"_02-what-is-rss-and-vsz-in-linux-memory-management"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-what-is-rss-and-vsz-in-linux-memory-management"}},[t._v("#")]),t._v(" 02 "),s("a",{attrs:{href:"https://stackoverflow.com/questions/7880784/what-is-rss-and-vsz-in-linux-memory-management",target:"_blank",rel:"noopener noreferrer"}},[t._v("What is RSS and VSZ in Linux memory management"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("一般我理解 RSS 为物理内存，VSZ 理解为虚拟内存，而在监控线上系统时，也是看 RSS。这篇文章说的更细一些")]),t._v(" "),s("ul",[s("li",[t._v("RSS")]),t._v(" "),s("li",[t._v("VSZ")]),t._v(" "),s("li",[t._v("PSS")])]),t._v(" "),s("h3",{attrs:{id:"_03-统计诗词中的前五百个高频字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-统计诗词中的前五百个高频字"}},[t._v("#")]),t._v(" 03 统计诗词中的前五百个高频字")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" array_to_string"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" char_cloud "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("GROUP")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("char")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("ORDER")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("BY")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("sum")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("count"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("desc")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("limit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("500")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("''")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_04-start-transaction-与-begin-的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_04-start-transaction-与-begin-的区别"}},[t._v("#")]),t._v(" 04 start transaction 与 begin 的区别")]),t._v(" "),s("p",[t._v("好像没啥区别...")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-18"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-18"}},[t._v("#")]),t._v(" 2019/08/18")]),t._v(" "),s("blockquote",[s("p",[t._v("欲买桂花同载酒，终不似，少年游。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-19"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-19"}},[t._v("#")]),t._v(" 2019/08/19")]),t._v(" "),s("blockquote",[s("p",[t._v("千里澄江似练，翠峰如簇。")])]),t._v(" "),s("h3",{attrs:{id:"_01-utm"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-utm"}},[t._v("#")]),t._v(" 01 UTM")]),t._v(" "),s("p",[t._v("关于打点的一些数据，用以了解广告投放的效果。自从转入了 toC 这边，越来越多地接触了运营的东西")]),t._v(" "),s("ul",[s("li",[t._v("utm_source：标识为您的媒体资源带来流量的广告客户、网站、出版物等，例如：google、newsletter4、billboard。")]),t._v(" "),s("li",[t._v("utm_medium：广告媒介或营销媒介，例如：每次点击费用、横幅广告和电子邮件简报。")]),t._v(" "),s("li",[t._v("utm_campaign：产品的具体广告系列名称、标语、促销代码等。")]),t._v(" "),s("li",[t._v("utm_term：标识付费搜索关键字。如果您采用人工方式标记付费关键字广告系列，那么您还应使用 utm_term 来指定相应关键字。")]),t._v(" "),s("li",[t._v("utm_content：用于区分相似内容或同一广告内的链接。例如，如果您在同一封电子邮件中使用了两个号召性用语链接，就可以使用 utm_content 并为每个链接设置不同的值，以便判断哪个版本的效果更好。")])]),t._v(" "),s("h3",{attrs:{id:"_02-补了两篇半年前的旧文"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-补了两篇半年前的旧文"}},[t._v("#")]),t._v(" 02 补了两篇半年前的旧文")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://shanyue.tech/post/canal-binlog-to-kafka",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于 canal 的安装以及配置"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://shanyue.tech/post/highlight-in-react",target:"_blank",rel:"noopener noreferrer"}},[t._v("使用十行 React 代码实现一个关键字高亮组件"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-20"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-20"}},[t._v("#")]),t._v(" 2019/08/20")]),t._v(" "),s("blockquote",[s("p",[t._v("无奈夜长人不寐，数声和月到帘栊。")])]),t._v(" "),s("h3",{attrs:{id:"_01-sql-中的隔离级-悲观锁与-mvcc"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-sql-中的隔离级-悲观锁与-mvcc"}},[t._v("#")]),t._v(" 01 SQL 中的隔离级，悲观锁与 MVCC")]),t._v(" "),s("p",[t._v("补一篇文章: "),s("a",{attrs:{href:"https://shanyue.tech/post/poem-char-frequent-stat",target:"_blank",rel:"noopener noreferrer"}},[t._v("关于统计诗词字云的解决方案"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2019-08-21"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-21"}},[t._v("#")]),t._v(" 2019/08/21")]),t._v(" "),s("blockquote",[s("p",[t._v("草色新雨中，松声晚窗里。")])]),t._v(" "),s("h3",{attrs:{id:"_01-重装-vscode"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-重装-vscode"}},[t._v("#")]),t._v(" 01 重装 vscode")]),t._v(" "),s("p",[t._v("由于最近 "),s("code",[t._v("vscode")]),t._v(" 中的语法高亮坏掉了，特别是在写 "),s("code",[t._v("css")]),t._v(" 和 "),s("code",[t._v("gql")]),t._v(" 的时候，近乎白色 (solarized light)，于是重装。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意以前俩位置要删除掉")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -rf ~/Library/Application"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("\\")]),t._v(" Support/Code\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" -r ~/.vsCode\n")])])]),s("h3",{attrs:{id:"_02-升级项目的-react-apollo-3-0-2-可以使用-usequery"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-升级项目的-react-apollo-3-0-2-可以使用-usequery"}},[t._v("#")]),t._v(" 02 升级项目的 react-apollo@3.0.2 可以使用 useQuery")]),t._v(" "),s("p",[t._v("commit: "),s("a",{attrs:{href:"https://github.com/shfshanyue/shici/commit/6a5e87418521dd21352eaf938fc98859561e279f",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/shici/commit/6a5e87418521dd21352eaf938fc98859561e279f"),s("OutboundLink")],1),t._v("\ncommit 2: "),s("a",{attrs:{href:"https://github.com/shfshanyue/shici/commit/523af69dadf3cc4909c621b6aa8addf777bc3875",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/shici/commit/523af69dadf3cc4909c621b6aa8addf777bc3875"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("恩，react-hook 对于我最大的好处就是减少了层级嵌套，爽啊")]),t._v(" "),s("p",[t._v("另外，一个 190 行的代码变成了 110 行，大大减少了代码量")]),t._v(" "),s("h3",{attrs:{id:"_03-prometheus-grafana"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-prometheus-grafana"}},[t._v("#")]),t._v(" 03 prometheus/grafana")]),t._v(" "),s("p",[t._v("今天使用 postgres 作为 grafana 的数据源做了一个图，感觉还不错")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-22"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-22"}},[t._v("#")]),t._v(" 2019/08/22")]),t._v(" "),s("blockquote",[s("p",[t._v("日暮东风怨啼鸟，落花犹似坠楼人")])]),t._v(" "),s("h3",{attrs:{id:"_01-一点-apollo-react-ssr-以及-next-js-的源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-一点-apollo-react-ssr-以及-next-js-的源码"}},[t._v("#")]),t._v(" 01 一点 @apollo/react-ssr 以及 next.js 的源码")]),t._v(" "),s("p",[t._v("关于脱水和注水两个重要的方法")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("InmemoryCache.prototype.restore()")])]),t._v(" "),s("li",[s("code",[t._v("InmemoryCache.prototype.extract()")])])]),t._v(" "),s("p",[s("code",[t._v('<script id="__NEXT_DATA__" type="application/json">')])]),t._v(" "),s("h3",{attrs:{id:"_02-关于清除前端多余静态资源的方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-关于清除前端多余静态资源的方案"}},[t._v("#")]),t._v(" 02 关于清除前端多余静态资源的方案")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-23"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-23"}},[t._v("#")]),t._v(" 2019/08/23")]),t._v(" "),s("h3",{attrs:{id:"_01-几个关于运营的关键词"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-几个关于运营的关键词"}},[t._v("#")]),t._v(" 01 几个关于运营的关键词")]),t._v(" "),s("ul",[s("li",[t._v("KA (key account)")]),t._v(" "),s("li",[t._v("漏斗分析")])]),t._v(" "),s("h3",{attrs:{id:"_02-漏斗分析"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-漏斗分析"}},[t._v("#")]),t._v(" 02 漏斗分析")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-24"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-24"}},[t._v("#")]),t._v(" 2019/08/24")]),t._v(" "),s("blockquote",[s("p",[t._v("萧萧梧叶送寒声，江上秋风动客情。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-25"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-25"}},[t._v("#")]),t._v(" 2019/08/25")]),t._v(" "),s("blockquote",[s("p",[t._v("浪花有意千里雪，桃花无言一队春。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-08-26"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-26"}},[t._v("#")]),t._v(" 2019/08/26")]),t._v(" "),s("blockquote",[s("p",[t._v("莫谩愁沽酒，囊中自有钱。")])]),t._v(" "),s("h3",{attrs:{id:"_01-the-benefits-of-server-side-rendering-over-client-side-rendering"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-the-benefits-of-server-side-rendering-over-client-side-rendering"}},[t._v("#")]),t._v(" 01 the-benefits-of-server-side-rendering-over-client-side-rendering")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://medium.com/walmartlabs/the-benefits-of-server-side-rendering-over-client-side-rendering-5d07ff2cefe8",target:"_blank",rel:"noopener noreferrer"}},[t._v("服务端渲染的实践"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_02-apollo-react-ssr-以及-apollo-react-hooks-的源码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-apollo-react-ssr-以及-apollo-react-hooks-的源码"}},[t._v("#")]),t._v(" 02 @apollo/react-ssr 以及 @apollo/react-hooks 的源码")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("ssr.getDataFromTree")])]),t._v(" "),s("li",[s("code",[t._v("ssr.getMarkFromTree")]),t._v(": 请求数据结束后，生成对应的字符串下发到浏览器")]),t._v(" "),s("li",[s("code",[t._v("hooks.RenderPromises")]),t._v(": 所有的请求")]),t._v(" "),s("li",[s("code",[t._v("hooks.QueryData")])])]),t._v(" "),s("p",[t._v("在 "),s("code",[t._v("@apollo/react-ssr")]),t._v(" 中默认调用 "),s("code",[t._v("ReactDOMServer.renderToStaticMarkup(element)")]),t._v("，因为它生成更小的字节数据")]),t._v(" "),s("h3",{attrs:{id:"_03-react-memo"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-react-memo"}},[t._v("#")]),t._v(" 03 React.memo")]),t._v(" "),s("p",[t._v("类似于 "),s("code",[t._v("PureComponent")])]),t._v(" "),s("h3",{attrs:{id:"_04-suspense-react-lazy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_04-suspense-react-lazy"}},[t._v("#")]),t._v(" 04 Suspense & React.lazy")]),t._v(" "),s("p",[t._v("主要处理懒加载组件吧，")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-27"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-27"}},[t._v("#")]),t._v(" 2019/08/27")]),t._v(" "),s("blockquote",[s("p",[t._v("寒蝉凄切，对长亭晚，骤雨初歇。")])]),t._v(" "),s("h3",{attrs:{id:"_01-客单价-成单周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-客单价-成单周期"}},[t._v("#")]),t._v(" 01 客单价/成单周期")]),t._v(" "),s("p",[t._v("平均每个顾客的支付费用，客单价高一般成单周期长，不过无所谓，toB 挣大钱")]),t._v(" "),s("h3",{attrs:{id:"_02-了解一些支付-api-以及微信开发-api"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-了解一些支付-api-以及微信开发-api"}},[t._v("#")]),t._v(" 02 了解一些支付 API 以及微信开发 API")]),t._v(" "),s("h3",{attrs:{id:"_03-批量设置-no-proxy"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-批量设置-no-proxy"}},[t._v("#")]),t._v(" 03 批量设置 no_proxy")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("printf")]),t._v(" -v no_proxy "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%s,'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("10.1")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("."),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("..")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("255")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("no_proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token variable"}},[t._v("${no_proxy"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("%")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(",")]),t._v("}")]),t._v('"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("no_proxy")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("0,1")]),t._v(",2,3,4,5,6,7,8,9\n")])])]),s("p",[t._v("参考 "),s("a",{attrs:{href:"https://unix.stackexchange.com/questions/23452/set-a-network-range-in-the-no-proxy-environment-variable",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://unix.stackexchange.com/questions/23452/set-a-network-range-in-the-no-proxy-environment-variable"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2019-08-28"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-28"}},[t._v("#")]),t._v(" 2019/08/28")]),t._v(" "),s("blockquote",[s("p",[t._v("萧瑟秋风今又是，换了人间")])]),t._v(" "),s("h3",{attrs:{id:"_01-教育细分行业-如何估计市场规模"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-教育细分行业-如何估计市场规模"}},[t._v("#")]),t._v(" 01 教育细分行业，如何估计市场规模")]),t._v(" "),s("h3",{attrs:{id:"_02-私域流量池"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-私域流量池"}},[t._v("#")]),t._v(" 02 私域流量池")]),t._v(" "),s("h3",{attrs:{id:"_03-了解-docker-的-aufs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-了解-docker-的-aufs"}},[t._v("#")]),t._v(" 03 了解 docker 的 AUFS")]),t._v(" "),s("h2",{attrs:{id:"_2019-08-29"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-29"}},[t._v("#")]),t._v(" 2019/08/29")]),t._v(" "),s("blockquote",[s("p",[t._v("无边尽掌露成霜，云随雁字长。")])]),t._v(" "),s("h3",{attrs:{id:"_01-思考几点-graphql-的意义"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-思考几点-graphql-的意义"}},[t._v("#")]),t._v(" 01 思考几点 graphql 的意义")]),t._v(" "),s("ol",[s("li",[t._v("技术: 性能，缓存")]),t._v(" "),s("li",[t._v("沟通: 联调 (文档化，强类型 -> type code autogen，想查啥就查啥)")]),t._v(" "),s("li",[t._v("业务: 快速迭代")]),t._v(" "),s("li",[t._v("人力: 低")])]),t._v(" "),s("h3",{attrs:{id:"_02-关于-k8s-的离线镜像包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-关于-k8s-的离线镜像包"}},[t._v("#")]),t._v(" 02 关于 k8s 的离线镜像包")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" images.txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" -I "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" docker pull "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" images.txt "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("xargs")]),t._v(" docker save -o gcr.tar\n")])])]),s("h2",{attrs:{id:"_2019-08-30"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-30"}},[t._v("#")]),t._v(" 2019/08/30")]),t._v(" "),s("h3",{attrs:{id:"_01-ssh-t-github-com"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-ssh-t-github-com"}},[t._v("#")]),t._v(" 01 ssh -t github.com")]),t._v(" "),s("h3",{attrs:{id:"_02-git-submodule-下载所有子模块"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-git-submodule-下载所有子模块"}},[t._v("#")]),t._v(" 02 git submodule 下载所有子模块")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" submodule update --remote\n")])])]),s("h2",{attrs:{id:"_2019-08-31"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-08-31"}},[t._v("#")]),t._v(" 2019/08/31")]),t._v(" "),s("h3",{attrs:{id:"_01-查看-centos-版本号"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-查看-centos-版本号"}},[t._v("#")]),t._v(" 01 查看 centos 版本号")]),t._v(" "),s("p",[t._v("centos 是一个没有支持的 rhel")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" /etc/redhat-release\nCentOS Linux release "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.4")]),t._v(".1708 "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Core"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),s("h3",{attrs:{id:"_02-现在我们生产环境中的磁盘复制速度多大"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-现在我们生产环境中的磁盘复制速度多大"}},[t._v("#")]),t._v(" 02 现在我们生产环境中的磁盘复制速度多大")]),t._v(" "),s("h3",{attrs:{id:"_03-iptables-s"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-iptables-s"}},[t._v("#")]),t._v(" 03 iptables -S")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-01"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-01"}},[t._v("#")]),t._v(" 2019/09/01")]),t._v(" "),s("h3",{attrs:{id:"_01-关于彩票市场规模"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-关于彩票市场规模"}},[t._v("#")]),t._v(" 01 关于彩票市场规模")]),t._v(" "),s("p",[t._v("每年规模大致4000个亿，其中乐透型大约占 60%")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"http://zhs.mof.gov.cn/zhengwuxinxi/zonghexinxi/201908/t20190830_3376960.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("2019年7月份全国彩票销售情况"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_02-关于在线教育市场的分类"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-关于在线教育市场的分类"}},[t._v("#")]),t._v(" 02 关于在线教育市场的分类")]),t._v(" "),s("ul",[s("li",[s("p",[t._v("B2B2C")])]),t._v(" "),s("li",[s("p",[t._v("B2C")])]),t._v(" "),s("li",[s("p",[s("a",{attrs:{href:"https://www.zhihu.com/question/21487768",target:"_blank",rel:"noopener noreferrer"}},[t._v("目前在线教育网站都有哪些分类？"),s("OutboundLink")],1)])])]),t._v(" "),s("h2",{attrs:{id:"_2019-09-02"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-02"}},[t._v("#")]),t._v(" 2019/09/02")]),t._v(" "),s("h3",{attrs:{id:"_01-在线教育市场的获客成本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-在线教育市场的获客成本"}},[t._v("#")]),t._v(" 01 在线教育市场的获客成本")]),t._v(" "),s("h3",{attrs:{id:"_02-两个数据获取平台"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-两个数据获取平台"}},[t._v("#")]),t._v(" 02 两个数据获取平台")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.qianzhan.com/",target:"_blank",rel:"noopener noreferrer"}},[t._v("前瞻"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("a",{attrs:{href:"https://www.iresearch.cn/",target:"_blank",rel:"noopener noreferrer"}},[t._v("艾瑞"),s("OutboundLink")],1)])]),t._v(" "),s("h3",{attrs:{id:"_03-解决-k8s-在外网使用-kubelet-进行权限访问时的证书问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-解决-k8s-在外网使用-kubelet-进行权限访问时的证书问题"}},[t._v("#")]),t._v(" 03 解决 k8s 在外网使用 kubelet 进行权限访问时的证书问题")]),t._v(" "),s("div",{staticClass:"language-txt extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("Unable to connect to the server: x509: certificate is valid for 10.96.0.1, 172.17.68.40, not 47.93.26.56\n")])])]),s("ul",[s("li",[s("a",{attrs:{href:"https://stackoverflow.com/questions/46360361/invalid-x509-certificate-for-kubernetes-master",target:"_blank",rel:"noopener noreferrer"}},[s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_2019-09-03"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-03"}},[t._v("#")]),t._v(" 2019/09/03")]),t._v(" "),s("blockquote",[s("p",[t._v("乍暖还清冷，风雨晚来方定。")])]),t._v(" "),s("h3",{attrs:{id:"_01-网页热力分析-heatmap"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-网页热力分析-heatmap"}},[t._v("#")]),t._v(" 01 网页热力分析 (heatmap)")]),t._v(" "),s("p",[t._v("可以用来分析最高 PV 几个页面的用户点击行为，点击率一般 0.1% 就算比较高了。一些重要内容，如排行榜，搜索可能会有两个百分点")]),t._v(" "),s("blockquote",[s("p",[t._v("注意网页热力分析时，querystring 不同是否视为不同页面")])]),t._v(" "),s("h3",{attrs:{id:"_02-访问深度"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-访问深度"}},[t._v("#")]),t._v(" 02 访问深度")]),t._v(" "),s("p",[t._v("DV，即 PV / UV，一般超过10就可以认为做的不错了")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-04"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-04"}},[t._v("#")]),t._v(" 2019/09/04")]),t._v(" "),s("blockquote",[s("p",[t._v("年年今夜，月华如练，长是人千里")])]),t._v(" "),s("h3",{attrs:{id:"_01-关于-k8s-中镜像的拉取策略"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-关于-k8s-中镜像的拉取策略"}},[t._v("#")]),t._v(" 01 关于 k8s 中镜像的拉取策略")]),t._v(" "),s("p",[t._v("这里的这个字段叫做 "),s("code",[t._v("imagePullPolicy")]),t._v("，默认值是 "),s("code",[t._v("IfNotPresent")]),t._v("，代表如果本地有镜像则从本地拉取镜像，而 "),s("code",[t._v("Always")]),t._v(" 表示总是从网络上拉取镜像。")]),t._v(" "),s("p",[t._v("而在 "),s("code",[t._v("metrics-server")]),t._v(" 的部署资源： "),s("code",[t._v("https://github.com/kubernetes-incubator/metrics-server/blob/master/deploy/1.8%2B/metrics-server-deployment.yaml")]),t._v("，其中用的是 "),s("code",[t._v("always")]),t._v("，害我半天拉不了 "),s("code",[t._v("k8s")]),t._v(" 的镜像，报 "),s("code",[t._v("ImagePullBackOff")]),t._v(" 的错误。")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-06"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-06"}},[t._v("#")]),t._v(" 2019/09/06")]),t._v(" "),s("h3",{attrs:{id:"_01-降准"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-降准"}},[t._v("#")]),t._v(" 01 降准")]),t._v(" "),s("p",[t._v("准：指法定存款准备金率。一个流程，社会资金 -> 银行 -> 央行，而准备金率指银行必须在央行存的钱与自己库存现金的比例。降准之后，商业银行钱会变多，增加人民币流动性。")]),t._v(" "),s("h3",{attrs:{id:"_02-成单周期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-成单周期"}},[t._v("#")]),t._v(" 02 成单周期")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-08"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-08"}},[t._v("#")]),t._v(" 2019/09/08")]),t._v(" "),s("blockquote",[s("p",[t._v("一声梧叶一声秋，一点芭蕉一点愁")])]),t._v(" "),s("h3",{attrs:{id:"_01-马太效应"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-马太效应"}},[t._v("#")]),t._v(" 01 马太效应")]),t._v(" "),s("p",[t._v("自由资本市场的贫富两极分化")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-09"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-09"}},[t._v("#")]),t._v(" 2019/09/09")]),t._v(" "),s("blockquote",[s("p",[t._v("金风细细，叶叶梧桐坠")])]),t._v(" "),s("h3",{attrs:{id:"_01-微服务治理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-微服务治理"}},[t._v("#")]),t._v(" 01 微服务治理")]),t._v(" "),s("p",[t._v("在简书上看到一篇还不错的文章")]),t._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://www.jianshu.com/p/dd818114ab4b",target:"_blank",rel:"noopener noreferrer"}},[t._v("微服务治理"),s("OutboundLink")],1)])]),t._v(" "),s("h2",{attrs:{id:"_2019-09-11"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-11"}},[t._v("#")]),t._v(" 2019/09/11")]),t._v(" "),s("blockquote",[s("p",[t._v("水风轻，蘋花渐老，月露冷，梧叶飘黄。")])]),t._v(" "),s("h2",{attrs:{id:"_2019-09-12"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-12"}},[t._v("#")]),t._v(" 2019/09/12")]),t._v(" "),s("h3",{attrs:{id:"_01-reverse-interview"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-reverse-interview"}},[t._v("#")]),t._v(" 01 "),s("a",{attrs:{href:"https://github.com/viraptor/reverse-interview",target:"_blank",rel:"noopener noreferrer"}},[t._v("reverse-interview"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_02-knew"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-knew"}},[t._v("#")]),t._v(" 02 knew")]),t._v(" "),s("p",[t._v("在 k8s v1.15 中新出的插件管理工具")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-15"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-15"}},[t._v("#")]),t._v(" 2019/09/15")]),t._v(" "),s("blockquote",[s("p",[t._v("惟将终夜长开眼，报答平生未展眉")])]),t._v(" "),s("h3",{attrs:{id:"_01-表意文字与表音文字"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-表意文字与表音文字"}},[t._v("#")]),t._v(" 01 表意文字与表音文字")]),t._v(" "),s("p",[t._v("来自知乎的一个问题: "),s("a",{attrs:{href:"https://www.zhihu.com/question/30724350",target:"_blank",rel:"noopener noreferrer"}},[t._v("为什么其他国家大多用拼音文字？"),s("OutboundLink")],1),t._v("，记录一下")]),t._v(" "),s("p",[t._v("文言二途")]),t._v(" "),s("p",[t._v("语言成为世界语言并不表明某语言本身的优势，而在于语言背后国家及文化的影响力")]),t._v(" "),s("p",[t._v("词库/联想")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-16"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-16"}},[t._v("#")]),t._v(" 2019/09/16")]),t._v(" "),s("blockquote",[s("p",[t._v("渐霜风凄紧，关河冷落，残照当楼")])]),t._v(" "),s("h3",{attrs:{id:"_01-apollo-tooling"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-apollo-tooling"}},[t._v("#")]),t._v(" 01 "),s("a",{attrs:{href:"https://github.com/apollographql/apollo-tooling",target:"_blank",rel:"noopener noreferrer"}},[t._v("apollo-tooling"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2019-09-18"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-18"}},[t._v("#")]),t._v(" 2019/09/18")]),t._v(" "),s("blockquote",[s("p",[t._v("潦水尽而寒潭清，烟光凝而暮山紫")])]),t._v(" "),s("h3",{attrs:{id:"_01-apollo-http-status"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-apollo-http-status"}},[t._v("#")]),t._v(" 01 "),s("a",{attrs:{href:"https://github.com/apollographql/apollo-server/commit/736ba4197ced826862235a0e9c1fc6a03e6935ce",target:"_blank",rel:"noopener noreferrer"}},[t._v("apollo http status"),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("关于 apollo-server 对于 http status 处理的一次提交")]),t._v(" "),s("h3",{attrs:{id:"_02-documentation-for-new-request-pipeline-life-cycle-hooks-plugins"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-documentation-for-new-request-pipeline-life-cycle-hooks-plugins"}},[t._v("#")]),t._v(" 02 "),s("a",{attrs:{href:"https://github.com/apollographql/apollo-server/pull/2008",target:"_blank",rel:"noopener noreferrer"}},[t._v("Documentation for new request pipeline life-cycle hooks/plugins."),s("OutboundLink")],1)]),t._v(" "),s("p",[t._v("plugin: 关于 apollo-server 加入 plugin 的一个没有加入文档的特性..")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-20"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-20"}},[t._v("#")]),t._v(" 2019/09/20")]),t._v(" "),s("h3",{attrs:{id:"_01-mysql-中的一个小问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-mysql-中的一个小问题"}},[t._v("#")]),t._v(" 01 mysql 中的一个小问题")]),t._v(" "),s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'a  '")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])])]),s("h2",{attrs:{id:"_2019-09-22"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-22"}},[t._v("#")]),t._v(" 2019/09/22")]),t._v(" "),s("blockquote",[s("p",[t._v("等闲变却故人心，却道故人心易变")])]),t._v(" "),s("h3",{attrs:{id:"_01-阮朝"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-阮朝"}},[t._v("#")]),t._v(" 01 阮朝")]),t._v(" "),s("p",[t._v("越南最后一个封建王朝，内帝外王")]),t._v(" "),s("h3",{attrs:{id:"_02-事大"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-事大"}},[t._v("#")]),t._v(" 02 事大")]),t._v(" "),s("h3",{attrs:{id:"_03-三国十五州"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-三国十五州"}},[t._v("#")]),t._v(" 03 三国十五州")]),t._v(" "),s("ul",[s("li",[t._v("凉州")]),t._v(" "),s("li",[t._v("并州")]),t._v(" "),s("li",[t._v("幽州")]),t._v(" "),s("li",[t._v("兖州")]),t._v(" "),s("li",[t._v("冀州")]),t._v(" "),s("li",[t._v("青州")]),t._v(" "),s("li",[t._v("荆州")]),t._v(" "),s("li",[t._v("徐州")]),t._v(" "),s("li",[t._v("扬州")]),t._v(" "),s("li",[t._v("交州")]),t._v(" "),s("li",[t._v("益州")])]),t._v(" "),s("h2",{attrs:{id:"_2019-09-25"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-25"}},[t._v("#")]),t._v(" 2019/09/25")]),t._v(" "),s("h3",{attrs:{id:"_01-react-portals"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-react-portals"}},[t._v("#")]),t._v(" 01 React Portals")]),t._v(" "),s("p",[t._v("适合写一个 Modal 组件")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-27"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-27"}},[t._v("#")]),t._v(" 2019/09/27")]),t._v(" "),s("h3",{attrs:{id:"_01-babel-如何定义一个-preset"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-babel-如何定义一个-preset"}},[t._v("#")]),t._v(" 01 babel: 如何定义一个 preset")]),t._v(" "),s("p",[t._v("文档在这里: https://babeljs.io/docs/en/presets")]),t._v(" "),s("p",[s("code",[t._v("preset")]),t._v(" 就是一系列 plugin 的集合")]),t._v(" "),s("h3",{attrs:{id:"_02-全球饥饿指数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-全球饥饿指数"}},[t._v("#")]),t._v(" 02 全球饥饿指数")]),t._v(" "),s("p",[t._v("GHI: https://www.globalhungerindex.org/results/")]),t._v(" "),s("h3",{attrs:{id:"_03-人类发展指数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-人类发展指数"}},[t._v("#")]),t._v(" 03 人类发展指数")]),t._v(" "),s("p",[t._v("HDI: https://en.wikipedia.org/wiki/List_of_countries_by_Human_Development_Index")]),t._v(" "),s("h2",{attrs:{id:"_2019-09-28"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-09-28"}},[t._v("#")]),t._v(" 2019/09/28")]),t._v(" "),s("h3",{attrs:{id:"_01-卡哈马卡之战"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-卡哈马卡之战"}},[t._v("#")]),t._v(" 01 卡哈马卡之战")]),t._v(" "),s("h2",{attrs:{id:"_2019-10-16"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-10-16"}},[t._v("#")]),t._v(" 2019/10/16")]),t._v(" "),s("h3",{attrs:{id:"_01-linux-命令中单引号以及双引号的区别"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-linux-命令中单引号以及双引号的区别"}},[t._v("#")]),t._v(" 01 linux 命令中单引号以及双引号的区别")]),t._v(" "),s("p",[t._v("从以下示例中很可以看出区别，当打印变量时，双引号会当做变量，而单引号原样输出")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v("\nshanyue\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"'),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v('"')]),t._v("\nshanyue\n$ "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("echo")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v("'")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token environment constant"}},[t._v("$USER")]),t._v("\n")])])]),s("h3",{attrs:{id:"_02-韩国近现代史"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-韩国近现代史"}},[t._v("#")]),t._v(" 02 韩国近现代史")]),t._v(" "),s("ul",[s("li",[t._v("1919 大韩民国临时政府在上海成立，此时为日占时期")]),t._v(" "),s("li",[t._v("1945 日本投降，美苏进驻朝鲜半岛，朝韩分裂，三八线为界")]),t._v(" "),s("li",[t._v("1948 朝鲜半岛南部大韩民国成立，李承晚首届总统，李承晚亲日亲美")]),t._v(" "),s("li",[t._v("1961 朴正熙军事政变，他是朴槿惠父亲，开启了军政府时代。在他掌权的17年出现了 "),s("strong",[t._v("汉江奇迹")]),t._v("，财团亲日亲美")]),t._v(" "),s("li",[t._v("1979 朴正熙遇刺身亡")]),t._v(" "),s("li",[t._v("1980 光州事件，随后全斗焕上台")]),t._v(" "),s("li",[t._v("1993 金泳三上台，此时他的党派为民主自由党")]),t._v(" "),s("li",[t._v("1997 亚洲金融危机爆发，金泳三向国际货币基金组织贷款 580亿美元")]),t._v(" "),s("li",[t._v("2002 卢武铉上台 (辩护人主角原型)")]),t._v(" "),s("li",[t._v("2007 卢武铉与金正日朝韩会面")]),t._v(" "),s("li",[t._v("2008 李明博上台，政治清算卢武铉，卢武铉自杀")]),t._v(" "),s("li",[t._v("2013 朴槿惠上台，闺蜜干政事件(崔顺实事件)被弹劾")]),t._v(" "),s("li",[t._v("2017 文在寅上台")]),t._v(" "),s("li",[t._v("2007 文在寅与金正恩朝韩会面")])]),t._v(" "),s("h3",{attrs:{id:"_03-2019-09-cpi"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-2019-09-cpi"}},[t._v("#")]),t._v(" 03 2019.09 CPI")]),t._v(" "),s("p",[t._v("9月份，全国CPI同比上涨3.0%。CPI 指中国居民消费价格，由于猪肉价格上涨极大影响了CPI。")]),t._v(" "),s("p",[t._v("详见 "),s("a",{attrs:{href:"http://www.stats.gov.cn/tjsj/zxfb/201910/t20191015_1702636.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("国家统计局九月CPI数据"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2019-10-17"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-10-17"}},[t._v("#")]),t._v(" 2019/10/17")]),t._v(" "),s("h3",{attrs:{id:"_01-wget-如何像-curl-一样打印到标准输出"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-wget-如何像-curl-一样打印到标准输出"}},[t._v("#")]),t._v(" 01 wget 如何像 curl 一样打印到标准输出")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" localhost:8080\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -q 指忽略 wget 自身的输出")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# -O 指输出文件, - 代表标准输出")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("wget")]),t._v(" -q -O - localhost:8080\n")])])]),s("h3",{attrs:{id:"_02-多服务器-ssh-key-的管理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-多服务器-ssh-key-的管理"}},[t._v("#")]),t._v(" 02 多服务器 ssh key 的管理")]),t._v(" "),s("p",[t._v("如果只有一台服务器，则可以通过 "),s("code",[t._v("ssh-copy-id")]),t._v(" 命令快速免密登录")]),t._v(" "),s("p",[t._v("那如果有100台服务器，如何快速使他们能够互相免密登录")]),t._v(" "),s("ol",[s("li",[t._v("拷贝 "),s("code",[t._v("~/.ssh/config")]),t._v(" 到每个服务器")]),t._v(" "),s("li",[t._v("使用 ansible 的 "),s("a",{attrs:{href:"https://docs.ansible.com/ansible/latest/modules/authorized_key_module.html#authorized-key-module",target:"_blank",rel:"noopener noreferrer"}},[t._v("authorized_key"),s("OutboundLink")],1),t._v(" 模块")])]),t._v(" "),s("h3",{attrs:{id:"_03-github-ssh-keys"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-github-ssh-keys"}},[t._v("#")]),t._v(" 03 github ssh keys")]),t._v(" "),s("p",[t._v("直接访问 "),s("code",[t._v("github.com/user.keys")]),t._v(" 可以直接获取用户所设置的 "),s("code",[t._v("ssh key")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" https://github.com/shfshanyue.keys\nssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC+lWovAJLpk6Jb7NGXQ08IISUNbalT9gpkFOx08cJAPlQDSU8Dqx8F9jK3m4wDj4wGh+rJbTbf6YcGF7kZGwJr+l70mNfAhYc5dU7in5ZdDJUpCzaoUtPceYa6BTnJPbTLSYEUTyvO2KNQNDEIMO95LfCrLaPSALGl3G6sXeE8bGiWR2LdBqxi5ocQsfhw11vX3Nr3L0Sd8cKQPusbMv8MipXizmGDFHMZezcSdQ26na+g6KHfQPqLR1Y80RvNJ47weOuzQ1oMBVIz/OVYajsxoqK+O8L0ZZR1DaTUsl4D9veQPdt+dH89oNZGikzNrGSiqng9w6Ro9Dcy9OIVVrgd\n")])])]),s("h3",{attrs:{id:"_04-资讯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_04-资讯"}},[t._v("#")]),t._v(" 04 资讯")]),t._v(" "),s("ul",[s("li",[t._v("22日，国家博物馆将开展甲骨文文化展览")]),t._v(" "),s("li",[t._v("国台办：大陆全面展开榕马大桥厦金大桥前期研究论证")]),t._v(" "),s("li",[t._v('15日, 美国国会众议院通过所谓 "2019年香港人权与民主法案"')])]),t._v(" "),s("h2",{attrs:{id:"_2019-10-18"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-10-18"}},[t._v("#")]),t._v(" 2019/10/18")]),t._v(" "),s("h3",{attrs:{id:"_01-资讯"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-资讯"}},[t._v("#")]),t._v(" 01 资讯")]),t._v(" "),s("ul",[s("li",[t._v("17日，歼-20 与运-20 在长春亮相")])]),t._v(" "),s("h3",{attrs:{id:"_02-如何查看服务器有多少用户登录"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-如何查看服务器有多少用户登录"}},[t._v("#")]),t._v(" 02 如何查看服务器有多少用户登录")]),t._v(" "),s("p",[t._v("两个命令，一个 "),s("code",[t._v("who")]),t._v(" 一个 "),s("code",[t._v("last")])]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("who")]),t._v(" -u\nroot     pts/0        Oct "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":04   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16860")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("124.200")]),t._v(".184.74"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\nroot     pts/2        Oct "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("18")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(":04   "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("         "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("16902")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("124.200")]),t._v(".184.74"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n$ last -a "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("head")]),t._v(" -10\n")])])]),s("h2",{attrs:{id:"_2019-10-22"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-10-22"}},[t._v("#")]),t._v(" 2019/10/22")]),t._v(" "),s("h3",{attrs:{id:"_01-k8s-中的-volume"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-k8s-中的-volume"}},[t._v("#")]),t._v(" 01 k8s 中的 Volume")]),t._v(" "),s("blockquote",[s("p",[t._v("To use a volume, a Pod specifies what volumes to provide for the Pod (the .spec.volumes field) and where to mount those into Containers (the .spec.containers[*].volumeMounts field).")])]),t._v(" "),s("p",[t._v("与 docker 中的 volume 最大的不同是，k8s 中的 volume 存在生命周期，而且 k8s 中的volume是分布式的")]),t._v(" "),s("h3",{attrs:{id:"_02-k8s-中的-persistentvolumes-与-persistentvolumeclaim"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-k8s-中的-persistentvolumes-与-persistentvolumeclaim"}},[t._v("#")]),t._v(" 02 k8s 中的 PersistentVolumes 与 PersistentVolumeClaim")]),t._v(" "),s("blockquote",[s("p",[t._v("PVs are resources in the cluster. PVCs are requests for those resources and also act as claim checks to the resource")])]),t._v(" "),s("p",[t._v("PV: 我应该去哪里拿一块空间，nfs 或者哪一个分布式存储的地方？\nPVC: 我应该去问 PV 要多少空间，并且我要给那个 pod 用")]),t._v(" "),s("div",{staticClass:"language-yaml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yaml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PersistentVolume\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("volume\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("labels")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("type")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" local\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storageClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" manual\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("capacity")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 20Gi\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("accessModes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ReadWriteOnce\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("hostPath")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("path")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/mnt/data"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("---")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("apiVersion")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" v1\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("kind")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" PersistentVolumeClaim\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("metadata")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" mysql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("pv"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("claim\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("spec")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storageClassName")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" manual\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("accessModes")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" ReadWriteOnce\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("resources")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("requests")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("storage")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" 20Gi\n")])])]),s("h3",{attrs:{id:"_03-nfs"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_03-nfs"}},[t._v("#")]),t._v(" 03 nfs")]),t._v(" "),s("p",[t._v("k8s 的 pv/pvc 依赖于 nfs，毕竟不用于 docker 的 volume，只在单机下。nfs, network file system，顾名思义，所以用它做分布式的文件系统简直再好不过了。")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ yum "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" rpc-bind nfs-utils\n$ systemctl "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("enable")]),t._v(" nfs\n$ systemctl start nfs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 创建挂载目录")]),t._v("\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("mkdir")]),t._v(" /data\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("cat")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">>")]),t._v(" /etc/exports "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<<")]),t._v("EOF\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" /data/     "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".68.0/24"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("rw,sync,no_root_squash,no_all_squash"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" EOF\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 重启 nfs 服务")]),t._v("\n$ systemctl restart nfs\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# showmount - show mount information for an NFS server")]),t._v("\n$ showmount -e localhost\nExport list "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" localhost:\n/data/ "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("172.17")]),t._v(".68.0/24\n")])])]),s("h2",{attrs:{id:"_2019-10-23"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2019-10-23"}},[t._v("#")]),t._v(" 2019-10-23")]),t._v(" "),s("h3",{attrs:{id:"_01-postgres-不设置密码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_01-postgres-不设置密码"}},[t._v("#")]),t._v(" 01 postgres 不设置密码")]),t._v(" "),s("p",[t._v("修改文件 "),s("code",[t._v("pg_hba.conf")]),t._v("，可以对特定网络的用户不设置密码")]),t._v(" "),s("div",{staticClass:"language-conf extra-class"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("host    all              postgres           127.0.0.1/32            trust\n")])])]),s("p",[t._v("具体参考文档 "),s("a",{attrs:{href:"https://www.postgresql.org/docs/9.3/auth-pg-hba-conf.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("The pg_hba.conf File"),s("OutboundLink")],1)]),t._v(" "),s("h3",{attrs:{id:"_02-在k8s-中使用-pgcli-连接-postgres"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_02-在k8s-中使用-pgcli-连接-postgres"}},[t._v("#")]),t._v(" 02 在k8s 中使用 pgcli 连接 postgres")]),t._v(" "),s("div",{staticClass:"language-shell extra-class"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("$ kubectl run pgcli --rm --tty -i --restart"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Never'")]),t._v(" --image docker.io/pygmy/pgcli --command -- pgcli --host pg-postgresql -U postgres -p "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("5432")]),t._v(" -d todos\n")])])])])}),[],!1,null,null,null);a.default=r.exports}}]);