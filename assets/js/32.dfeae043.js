(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{417:function(t,e,r){t.exports=r.p+"assets/img/vercel-import.12048d94.png"},596:function(t,e,r){"use strict";r.r(e);var a=r(42),s=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"使用-vercel-托管你的-api-服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#使用-vercel-托管你的-api-服务"}},[t._v("#")]),t._v(" 使用 Vercel 托管你的 API 服务")]),t._v(" "),a("p",[a("code",[t._v("Vercel")]),t._v("，官网 "),a("a",{attrs:{href:"https://vercel.com",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vercel.com"),a("OutboundLink")],1),t._v("，如同 "),a("code",[t._v("Netlify")]),t._v(" 一般，可以提供免费的前端应用托管，甚至对开发者更加亲和与友好。")]),t._v(" "),a("p",[t._v("以下截图，可见一斑: "),a("strong",[t._v("当你部署前端应用时，它能够根据你使用的技术栈而自动设置构建命令及输出目录")])]),t._v(" "),a("p",[a("img",{attrs:{src:r(417),alt:"使用vercel导入项目"}})]),t._v(" "),a("p",[a("code",[t._v("Vercel")]),t._v(" 团队为了更好地推广他们的云服务，在开源中做了众多贡献，甚至盛名在外，以下几个 npm package 你即使没有使用过，但肯定会有所耳闻：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/vercel/next.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("next.js"),a("OutboundLink")],1),t._v(": 基于 React 的框架，也有可能是最好用的 SSR 方案")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vercel/swr",target:"_blank",rel:"noopener noreferrer"}},[t._v("swr"),a("OutboundLink")],1),t._v(": 基于 React hooks 的数据请求库，可最大限度地充分利用缓存，并实现"),a("em",[t._v("乐观 UI")])]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/vercel/serve",target:"_blank",rel:"noopener noreferrer"}},[t._v("serve"),a("OutboundLink")],1),t._v(": 适用于本地用于测试的静态文件托管服务")])]),t._v(" "),a("p",[t._v("我们可以使用 "),a("code",[t._v("Vercel")]),t._v("/"),a("code",[t._v("Netlify")]),t._v("/"),a("code",[t._v("AliOSS")]),t._v(" 以及各大云厂商的一些 Serverless 产品来几乎零成本地部署前端应用，但是偶尔也需要配套一些简单的 API 支持。如果购买一台云服务器，就是杀鸡焉用宰牛刀了。")]),t._v(" "),a("p",[t._v("你也可以选择各大云厂商的 Serverless 产品，但 "),a("code",[t._v("Vercel")]),t._v(" 相对而言，学习成本低，更加容易上手，本篇文章介绍如何使用 "),a("code",[t._v("Vercel")]),t._v(" 来部署 API 服务")]),t._v(" "),a("h2",{attrs:{id:"hello-world"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#hello-world"}},[t._v("#")]),t._v(" hello, world")]),t._v(" "),a("p",[t._v("新建 "),a("code",[t._v("/api/index.js")]),t._v("，文件内容如下，"),a("em",[t._v("标准的 HTTP Handler 的语法")]),t._v("，只要你熟悉 "),a("code",[t._v("http")]),t._v(" 模块，就可以很快上手:")]),t._v(" "),a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function-variable function"}},[t._v("exports")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" res")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'World'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("query\n  res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("send")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("Hello ")]),a("span",{pre:!0,attrs:{class:"token interpolation"}},[a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("${")]),t._v("name"),a("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[t._v("}")])]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("!")]),a("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[t._v("`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("虽然很简单，但是也有可能出错，以下是源码及演示地址:")]),t._v(" "),a("ul",[a("li",[t._v("源码: "),a("a",{attrs:{href:"https://github.com/shfshanyue/vercel-api",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/shfshanyue/vercel-api"),a("OutboundLink")],1)]),t._v(" "),a("li",[t._v("演示地址: "),a("a",{attrs:{href:"https://vercel-api-orpin-omega.vercel.app/api?name=shanyue",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://vercel-api-orpin-omega.vercel.app/api?name=shanyue"),a("OutboundLink")],1)])]),t._v(" "),a("p",[t._v("以上是使用 "),a("code",[t._v("Node")]),t._v(" 作为运行时的代码，但其实它还可以使用以下编程语言:")]),t._v(" "),a("ul",[a("li",[t._v("Node")]),t._v(" "),a("li",[t._v("Go")]),t._v(" "),a("li",[t._v("Python")]),t._v(" "),a("li",[t._v("Ruby")])]),t._v(" "),a("p",[t._v("Runtime 拥有更多的 API 及配置，可见文档：")]),t._v(" "),a("p",[a("a",{attrs:{href:"https://vercel.com/docs/runtimes#official-runtimes/node-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("Vercel Runtimes"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"rewrite-与-redirect"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#rewrite-与-redirect"}},[t._v("#")]),t._v(" Rewrite 与 Redirect")]),t._v(" "),a("p",[t._v("部署完成后，默认的路由路径是 "),a("code",[t._v("/api")]),t._v("，此时 "),a("code",[t._v("/")]),t._v(" 会"),a("em",[t._v("显示文件目录")]),t._v("，如果想更好地扩展路由呢？")]),t._v(" "),a("p",[t._v("通过配置文件 "),a("code",[t._v("vercel.json")]),t._v(" 配置 "),a("code",[t._v("Rewrites/Redirects")]),t._v(" 可完成此功能")]),t._v(" "),a("div",{staticClass:"language-json extra-class"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"rewrites"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"source"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"destination"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/api"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h2",{attrs:{id:"小而有创意的-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#小而有创意的-api"}},[t._v("#")]),t._v(" 小而有创意的 API")]),t._v(" "),a("p",[t._v("由于 "),a("code",[t._v("Vercel")]),t._v(" 这个 API 的本质也是 "),a("code",[t._v("Serverless")]),t._v("，最适合做一些轻量的若存储的服务。我也收集了一些小而有创意的服务，如下所列")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://github.com/anuraghazra/github-readme-stats",target:"_blank",rel:"noopener noreferrer"}},[t._v("github-readme-stats"),a("OutboundLink")],1),t._v(": Github Readme 的统计数据图表")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/badges/shields",target:"_blank",rel:"noopener noreferrer"}},[t._v("shields.io"),a("OutboundLink")],1),t._v(": 设计各种漂亮的 Badge")]),t._v(" "),a("li",[a("a",{attrs:{href:"http://goqr.me/api/",target:"_blank",rel:"noopener noreferrer"}},[t._v("qrcode api"),a("OutboundLink")],1),t._v(": 生成二维码")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/willnorris/imageproxy",target:"_blank",rel:"noopener noreferrer"}},[t._v("imageproxy"),a("OutboundLink")],1),t._v(": 一个对图片进行处理的服务，也可以用来反防盗链")]),t._v(" "),a("li",[a("a",{attrs:{href:"https://github.com/itsthatguy/avatars-api-middleware",target:"_blank",rel:"noopener noreferrer"}},[t._v("avatar api"),a("OutboundLink")],1),t._v(": 生成指定或随机的头像")])])])}),[],!1,null,null,null);e.default=s.exports}}]);