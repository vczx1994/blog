(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{530:function(e,n,s){"use strict";s.r(n);var t=s(42),a=Object(t.a)({},(function(){var e=this,n=e.$createElement,s=e._self._c||n;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("p",[e._v("date: 2020-07-17 20:00")]),e._v(" "),s("hr"),e._v(" "),s("h1",{attrs:{id:"unexpected-end-of-json-input-while-parsing-near"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#unexpected-end-of-json-input-while-parsing-near"}},[e._v("#")]),e._v(" Unexpected end of JSON input while parsing near")]),e._v(" "),s("p",[e._v("今天在升级 "),s("code",[e._v("serverless")]),e._v(" 时，未能安装成功，提示问题如下")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" i -g serverless\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" Unexpected end of JSON input "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("while")]),e._v(" parsing near "),s("span",{pre:!0,attrs:{class:"token string"}},[e._v("'...oyNMOOPIvOSSv8aveUYxO'")]),e._v("\n\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v(" A complete log of this run can be found in:\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" ERR"),s("span",{pre:!0,attrs:{class:"token operator"}},[e._v("!")]),e._v("     /root/.npm/_logs/2020-07-17T09_32_21_882Z-debug.log\n\n")])])]),s("h2",{attrs:{id:"捉虫"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#捉虫"}},[e._v("#")]),e._v(" 捉虫")]),e._v(" "),s("p",[e._v("既然是 npm 的问题，那首先去 github 的源码中找找问题")]),e._v(" "),s("p",[e._v("npm 的源码在 "),s("a",{attrs:{href:"https://github.com/npm/cli",target:"_blank",rel:"noopener noreferrer"}},[e._v("https://github.com/npm/cli"),s("OutboundLink")],1),e._v("，找到以下 Issue")]),e._v(" "),s("ul",[s("li",[s("a",{attrs:{href:"https://github.com/npm/npm/issues/21172",target:"_blank",rel:"noopener noreferrer"}},[e._v("Unexpected end of JSON input while parsing near #21172"),s("OutboundLink")],1)])]),e._v(" "),s("h2",{attrs:{id:"解决方案"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决方案"}},[e._v("#")]),e._v(" 解决方案")]),e._v(" "),s("p",[e._v("这是因为本地 "),s("code",[e._v("npm cache")]),e._v(" 的问题，清除掉本地的 cache 即可成功，如下所示")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" cache clean --force\n"),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" WARN using --force I sure hope you know what you are doing.\n\n$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" i -g serverless\n")])])]),s("p",[e._v("另外可以通过 "),s("code",[e._v("npm cache verify")]),e._v(" 去查看缓存位置")]),e._v(" "),s("div",{staticClass:"language-bash extra-class"},[s("pre",{pre:!0,attrs:{class:"language-bash"}},[s("code",[e._v("$ "),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("npm")]),e._v(" cache verify\nCache verified and compressed "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),e._v("~/.npm/_cacache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(":\nContent verified: "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("4217")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("168362093")]),e._v(" bytes"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v("\nIndex entries: "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("5814")]),e._v("\nFinished "),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("in")]),e._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[e._v("11")]),e._v(".194s\n")])])])])}),[],!1,null,null,null);n.default=a.exports}}]);